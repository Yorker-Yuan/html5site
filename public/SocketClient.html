<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Client</title>
</head>
<body>
    <h2 id="h2"></h2>

    <script>
        var theH = document.querySelector('#h2')
        //step1 連線到 WebSocket Server
        var client = new WebSocket('ws://echo.websocket.org/')

        //連線成功會觸發open事件
        client.addEventListener('open',function(){
            theH.innerHTML = "連線成功<br>"
            //step2 發送資料
            client.send("Hello WebSocket From III")
   
        })
        //step3 接收Socket Server傳過來的資料
        client.addEventListener('message',function(event){
            theH.innerHTML += "資料來自Socket Server：" + event.data + "<br>";
            //關閉連線
            client.close();
        })
        //連線關閉會觸發close事件
        client.addEventListener('close',function(){
            theH.innerHTML += "連線關閉<br>"
        })
    </script>
</body>
</html>